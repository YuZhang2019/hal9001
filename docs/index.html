<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Scalable Highly Adaptive Lasso • hal9001</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="The Scalable Highly Adaptive Lasso">
<meta property="og:description" content="Routines for constructing sparse matrices of basis functions, as
  well as a custom implementation of L1-regularized regression (i.e. the LASSO),
  altogether providing a fast, computationally efficient implementation of the
  Highly Adaptive LASSO (HAL), primarily in C++ but made available for use in R
  through Rcpp.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115145808-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115145808-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">hal9001</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="https://tlverse.org">tlverse</a>
</li>
<li>
  <a href="articles/intro_hal9001.html">Overview</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/tlverse/hal9001">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="rhal9001" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#rhal9001" class="anchor"></a>R/<code>hal9001</code>
</h1></div>

<blockquote>
<p><em>Fast</em> and <em>scalable</em> estimation procedure for the Highly Adaptive LASSO</p>
</blockquote>
<p><strong>Authors:</strong> <a href="https://github.com/tlverse">Jeremy Coyle</a> and <a href="https://nimahejazi.org">Nima Hejazi</a></p>
<hr>
<div id="whats-hal9001" class="section level2">
<h2 class="hasAnchor">
<a href="#whats-hal9001" class="anchor"></a>What’s <code>hal9001</code>?</h2>
<p><code>hal9001</code> is an R package providing an implementation of the scalable Highly Adaptive LASSO (HAL), a nonparametric regression estimator that applies L1-regularized regression (i.e., the LASSO) to a design matrix composed of indicator functions corresponding to a set of covariates and interactions thereof. Recent theoretical results show that HAL is endowed with several important properties that make it optimally suited for the purpose of estimating highly complex functions, including for inference in problem settings where causal parameters are estimated via data-adaptive techniques (i.e., machine learning), as is the case with Targeted Minimum Loss-Based Estimation (TMLE). While it is certainly possible to implement HAL purely in R, the computationally intensive nature of the algorithm suggests that writing core routines in C++ (and making these available in R via the <a href="http://www.rcpp.org/">Rcpp</a> framework) ought to provide significant efficiency gains. <code>hal9001</code> is just such an implementation.</p>
<p>For detailed discussions of the Highly Adaptive LASSO estimator, the interested reader might consider consulting <span class="citation">Benkeser and van der Laan (2016)</span>, <span class="citation">van der Laan (2017a)</span>, and <span class="citation">van der Laan (2017b)</span>.</p>
<hr>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<!--
For standard use, we recommend installing the package from
[CRAN](https://cran.r-project.org/) via


```r
install.packages("hal9001")
```
-->
<p>You can install the development version of <code>hal9001</code> from GitHub via <a href="https://www.rstudio.com/products/rpackages/devtools/"><code>devtools</code></a> with</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"tlverse/hal9001"</span>, <span class="dt">build_vignettes =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<hr>
</div>
<div id="issues" class="section level2">
<h2 class="hasAnchor">
<a href="#issues" class="anchor"></a>Issues</h2>
<p>If you encounter any bugs or have any specific feature requests, please <a href="https://github.com/tlverse/hal9001/issues">file an issue</a>.</p>
<hr>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This minimal example shows how to use <code>hal9001</code> to obtain predictions based on the Highly Adaptive LASSO. For details on the properties of the estimator, the interested reader is referred to <span class="citation">Benkeser and van der Laan (2016)</span> and <span class="citation">van der Laan (2017a)</span>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># load the hal9001 package</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(hal9001)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; Loading required package: Rcpp</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; hal9001 v0.2.3: The Scalable Highly Adaptive Lasso</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co"># simulate data</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">385971</span>)</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">n =<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">p =<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10">x &lt;-<span class="st"> </span>xmat &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(n <span class="op">*</span><span class="st"> </span>p), n, p)</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">y &lt;-<span class="st"> </span>x[, <span class="dv">1</span>] <span class="op">*</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Trig">sin</a></span>(x[, <span class="dv">2</span>]) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(n, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="fl">0.2</span>)</a>
<a class="sourceLine" id="cb2-12" data-line-number="12"></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co"># fit the HAL regression</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14">hal_fit &lt;-<span class="st"> </span><span class="kw"><a href="reference/fit_hal.html">fit_hal</a></span>(<span class="dt">X =</span> x, <span class="dt">Y =</span> y)</a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; [1] "Look Dave, I can see you're really upset about this. I honestly think you ought to sit down calmly, take a stress pill, and think things over."</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16">hal_fit<span class="op">$</span>times</a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;                   user.self sys.self elapsed user.child sys.child</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt; design_matrix         0.003    0.000   0.003          0         0</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; remove_duplicates     0.005    0.000   0.005          0         0</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; reduce_basis          0.000    0.000   0.000          0         0</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; lasso                 0.402    0.019   0.421          0         0</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; total                 0.410    0.019   0.429          0         0</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co"># training sample prediction</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25">preds &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(hal_fit, <span class="dt">new_data =</span> x)</a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(hal_mse &lt;-<span class="st"> </span>(preds <span class="op">-</span><span class="st"> </span>y)<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="co">#&gt; [1] 0.008827644</span></a></code></pre></div>
<hr>
</div>
<div id="contributions" class="section level2">
<h2 class="hasAnchor">
<a href="#contributions" class="anchor"></a>Contributions</h2>
<p><code>hal9001</code> is the primary implementation of the Highly Adaptive LASSO, an nonparametric function estimation procedure with numerous optimality properties. While contributions are very welcome, we ask that interested contributors consult our <a href="https://github.com/tlverse/hal9001/blob/master/CONTRIBUTING.md">contribution guidelines</a> prior to submitting a pull request.</p>
<hr>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>After using the <code>hal9001</code> R package, please cite the following:</p>
<pre><code>    @misc{coyle2018hal9001,
      author = {Coyle, Jeremy R and Hejazi, Nima S},
      title = {{hal9001}: The Scalable {Highly Adaptive LASSO}},
      year  = {2018},
      howpublished = {\url{https://github.com/tlverse/hal9001}},
      url = {https://doi.org/DOI_TBD},
      doi = {DOI_TBD}
    }</code></pre>
<hr>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>© 2017-2018 <a href="https://github.com/tlverse">Jeremy R. Coyle</a> &amp; <a href="https://nimahejazi.org">Nima S. Hejazi</a></p>
<p>The contents of this repository are distributed under the GPL-3 license. See file <code>LICENSE</code> for details.</p>
<hr>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-benkeser2016hal">
<p>Benkeser, David, and Mark J van der Laan. 2016. “The Highly Adaptive Lasso Estimator.” In <em>2016 IEEE International Conference on Data Science and Advanced Analytics (DSAA)</em>. IEEE. <a href="https://doi.org/10.1109/dsaa.2016.93">https://doi.org/10.1109/dsaa.2016.93</a>.</p>
</div>
<div id="ref-vdl2017generally">
<p>van der Laan, Mark J. 2017a. “A Generally Efficient Targeted Minimum Loss Based Estimator Based on the Highly Adaptive Lasso.” <em>The International Journal of Biostatistics</em>. De Gruyter. <a href="https://doi.org/10.1515/ijb-2015-0097">https://doi.org/10.1515/ijb-2015-0097</a>.</p>
</div>
<div id="ref-vdl2017finite">
<p>———. 2017b. “Finite Sample Inference for Targeted Learning.” <em>ArXiv E-Prints</em>.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/tlverse/hal9001">https://​github.com/​tlverse/​hal9001</a>
</li>
<li>Report a bug at <br><a href="https://github.com/tlverse/hal9001/issues">https://​github.com/​tlverse/​hal9001/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jeremy Coyle <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9874-6649" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
<li>Nima Hejazi <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-7127-2789" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
<li>Mark van der Laan <br><small class="roles"> Author, copyright holder, thesis advisor </small> <a href="https://orcid.org/0000-0003-1432-5511" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/tlverse/hal9001"><img src="https://travis-ci.org/tlverse/hal9001.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/jeremyrcoyle/hal9001"><img src="https://ci.appveyor.com/api/projects/status/github/jeremyrcoyle/hal9001?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/tlverse/hal9001?branch=master"><img src="https://img.shields.io/codecov/c/github/tlverse/hal9001/master.svg" alt="Coverage Status"></a></li>
<li><a href="http://www.repostatus.org/#wip"><img src="http://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a></li>
<li><a href="http://www.gnu.org/licenses/gpl-3.0"><img src="https://img.shields.io/badge/License-GPL%20v3-blue.svg" alt="License: GPL v3"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jeremy Coyle, Nima Hejazi, Mark van der Laan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
